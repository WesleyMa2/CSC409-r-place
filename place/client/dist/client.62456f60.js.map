{"version":3,"sources":["view.js","client.js"],"names":["View","event","preventDefault","zoomEl","document","getElementById","deltaY","zoomScale","style","transform","panEl","button","isMouseDown","mouseDownPos","x","screenX","y","screenY","console","log","xOffset","yOffset","canvas","ctx","getContext","addEventListener","zoom","mouseDown","mouseMove","mouseUp","pixels","length","image","ImageData","putImageData","getColor","colorId","colors","app","uintc8","Uint8ClampedArray","i","Math","floor","random","renderInitialMap"],"mappings":"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","file":"client.62456f60.js","sourceRoot":"../src","sourcesContent":["export default class View {\r\n    constructor() {\r\n        this.canvas = document.getElementById('canvas')\r\n        this.ctx = this.canvas.getContext('2d')\r\n\r\n        this.zoomScale = 4\r\n        this.isMouseDown = false\r\n        this.mouseDownPos = {x: 0, y: 0}\r\n\r\n        // register zoom + scroll handlers\r\n        this.canvas.addEventListener(\"wheel\", this.zoom)\r\n        this.canvas.addEventListener('mousedown', this.mouseDown)\r\n        this.canvas.addEventListener('mousemove', this.mouseMove)\r\n        this.canvas.addEventListener('mouseup', this.mouseUp)\r\n    }\r\n\r\n    renderInitialMap(pixels) {\r\n        console.log(pixels.length)\r\n        const image = new ImageData(pixels, 1000, 1000)\r\n        this.ctx.putImageData(image, 0, 0)\r\n    }\r\n\r\n    zoom = (event) => {\r\n        event.preventDefault()\r\n        const zoomEl = document.getElementById('zoom')\r\n\r\n        // zoom in\r\n        if (event.deltaY < 0) {\r\n            this.zoomScale = 40\r\n        } else {\r\n            this.zoomScale = 4\r\n        }\r\n        zoomEl.style.transform = `scale(${this.zoomScale})`;\r\n    }\r\n\r\n    mouseDown = (event) => {\r\n        event.preventDefault()\r\n        const panEl = document.getElementById('pan')\r\n\r\n        if (event.button === 0) {\r\n            this.isMouseDown = true\r\n            this.mouseDownPos = { x: event.screenX, y: event.screenY}\r\n            console.log(panEl.style.transform)\r\n        }\r\n\r\n    }\r\n\r\n    mouseMove = (event) => {\r\n        event.preventDefault()\r\n        const panEl = document.getElementById('pan')\r\n        if (this.isMouseDown) {\r\n            const xOffset = event.screenX - this.mouseDownPos.x\r\n            const yOffset = event.screenY - this.mouseDownPos.y\r\n            panEl.style.transform = `translate(${xOffset}px, ${yOffset}px)`\r\n        }\r\n    }\r\n\r\n    mouseUp = (event) => {\r\n        event.preventDefault()\r\n        const panEl = document.getElementById('pan')\r\n\r\n        if (event.button === 0) {\r\n            this.isMouseDown = false\r\n        }\r\n    }\r\n}\r\n\r\nfunction getColor(colorId) {\r\n    const colors = [\r\n        0xFFFFFF,\r\n        0xE4E4E4,\r\n        0x888888,\r\n        0x222222,\r\n        0xFFA7D1,\r\n        0xE50000,\r\n        0xE59500,\r\n        0xA06A42,\r\n        0xE5D900,\r\n        0x94E044,\r\n        0x02BE01,\r\n        0x00D3DD,\r\n        0x0083C7,\r\n        0x0000EA,\r\n        0xCF6EE4,\r\n        0x820080\r\n    ]\r\n\r\n    if (colorId > 0 && colorId < 16) {\r\n        return colors[colorId]\r\n    } else {\r\n        return 0x222222\r\n    }\r\n}","import View from './view'\r\n\r\nlet app = new View()\r\n\r\n// generate random pixels\r\nvar uintc8 = new Uint8ClampedArray(4 * 1000000);\r\n\r\nfor(let i = 0; i < 4000000; i++) {\r\n    uintc8[i] = Math.floor(Math.random() * 256)\r\n}\r\n\r\napp.renderInitialMap(uintc8)\r\n\r\n// pixels = [[x, y, color]]\r\n\r\n//Add the canvas that Pixi automatically created for you to the HTML document\r\n"]}